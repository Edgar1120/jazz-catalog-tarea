import N from"./CBwFSs2t.js";import{_ as B,h as D,f as _,c as d,i as R,u as n,a as t,b,t as i,d as c,F as h,r as v,o as u,g as w,w as m,e as S}from"#entry";import{_ as V}from"./BGl0QTma.js";import{u as p,q as g}from"./BUuvkEpe.js";import"./B8ewKG0m.js";import"./BSZFgSs5.js";import"./B8IaAclc.js";import"./B_Oj_IzK.js";const A={key:0,class:"artist-page"},F={class:"artist-header"},q=["src","alt"],L={class:"artist-info"},j={class:"artist-name"},E={class:"badge"},I={class:"cards-grid"},O={class:"cards-grid"},P={__name:"[slug]",async setup(T){let e,r;const l=D().params.slug,{data:o}=([e,r]=_(()=>p(`artist-${l}`,()=>g(`/artists/${l}`).findOne())),e=await e,r(),e),{data:x}=([e,r]=_(()=>p(`artist-albums-${l}`,()=>g("/albums").where({artistSlug:l}).sort({year:1}).find())),e=await e,r(),e),{data:k}=([e,r]=_(async()=>p(`artist-labels-${l}`,async()=>{if(!o.value?.labelRefs?.length)return[];const f=o.value.labelRefs.map(a=>`/labels/${a}`);return await g().where({_path:{$in:f}}).find()})),e=await e,r(),e);return(f,a)=>{const $=N,C=S,y=V;return n(o)?(u(),d("section",A,[t("div",F,[t("img",{src:n(o).image,alt:n(o).name,class:"artist-photo"},null,8,q),t("div",L,[t("h1",j,i(n(o).name),1),t("p",E,i(n(o).styles?.join(", ")),1),t("p",null,[a[0]||(a[0]=c("País: ",-1)),t("strong",null,i(n(o).country),1)]),t("p",null,[a[1]||(a[1]=c("Años activo(s): ",-1)),t("strong",null,i(n(o).years_active),1)]),b($,{value:n(o),class:"artist-bio"},null,8,["value"])])]),a[3]||(a[3]=t("h2",{class:"section-title"},"Álbumes",-1)),t("div",I,[(u(!0),d(h,null,v(n(x),s=>(u(),w(y,{key:s._path,to:s._path,title:s.title,subtitle:s.year?.toString(),image:s.cover},{default:m(()=>[t("p",null,[a[2]||(a[2]=c("Discográfica: ",-1)),b(C,{to:`/labels/${s.labelSlug}`,class:"link"},{default:m(()=>[c(i(s.label),1)]),_:2},1032,["to"])])]),_:2},1032,["to","title","subtitle","image"]))),128))]),a[4]||(a[4]=t("h2",{class:"section-title"},"Discográficas relacionadas",-1)),t("div",O,[(u(!0),d(h,null,v(n(k),s=>(u(),w(y,{key:s._path,to:s._path,title:s.name,subtitle:s.country,image:s.logo},{default:m(()=>[t("p",null,"Fundada: "+i(s.founded),1)]),_:2},1032,["to","title","subtitle","image"]))),128))])])):R("",!0)}}},X=B(P,[["__scopeId","data-v-208b5c60"]]);export{X as default};
